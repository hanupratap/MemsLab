{% extends 'memslab/Base.html'%}
{%load thumbnail%}
{% load staticfiles %}
{% block title%}
{{project.name}}
{%endblock%}



{% block body %}
{% if user.is_authenticated%}
{%if not employee.researcher%}
<div class="container col-10 mb-5 border p-4 rounded_m bg-white  shadow-sm ">
  <div class="text-left container col-12  "><a href="{%url 'memslab:manage_projects' project.id%} "><button
        class="btn btn-primary btn-md rounded_mn"><i class="fas fa-tasks"></i> Edit Project</button></a></div>
</div>
{%endif%}
{%endif%}




<div class="container col-12 col-md-4 col-lg-3 ml-auto p-0 m-0 text-left  my-5 border rounded-left">
{%if not project.status%}
<div class=" bq-primary p-2 shadow-sm"><span style="font-size:120%;"><b>Status</b>:</span> <span class="text-primary" style="font-size:110%;"><b>Ongoing</b></span></div>
{%else%}
<div class="bq-success  p-2   shadow-sm"><span style="font-size:120%;"><b>Status</b>:</span> <span class="text-success" style="font-size:110%;"><b>Completed</b></span></div>
{%endif%}
</div>

 {%if images%}
 <div class="px-md-0 px-4">
     <div class="container shadow-sm border  rounded_m pt-4">
  <span data-toggle="collapse" data-target="#demo" style="cursor: pointer;"><h1>Gallery</h1><div class="text-right"><i class="fas fa-caret-down"></i> </div></span>
  <div class="card-columns collapse p-3" id="demo" >
        {%for image in images%}

         <div class="card rounded-0  border p-0 m-0 mr-lg-3 m-0 mb-lg-3 mb-4 proj_cards "   >

        <div style=" display: inline-block; overflow: hidden; ">
            {% thumbnail image.pic "350" crop="center" as im %}
            <img   src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}" style="object-fit: cover; width: 100%; height: auto;"
              class="  rounded-0 card-img-top " alt="Generic placeholder image">
            {% endthumbnail %}
          </div>
          {%if image.title%}
          <button class="btn border border-dark waves-effect btn-sm rounded_mn btn-link" data-toggle="modal" data-target="#myModal{{image.id}}"><i class="fas fa-eye"></i> View</button>
          {%endif%}
   </div>
 {%endfor%}
</div>

</div></div>

{%endif%}

<div class="container-fluid mt-5  bg-transparent py-2" style="  min-height:500px; color: white;

background: linear-gradient( rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6) ), url({{background}});

background-attachment: fixed;

background-repeat: no-repeat;
background-size: cover;
word-wrap: break-word;">

  <h1>{{project.name}}</h1>

  <p class="lead ">{{project.specializaiton}}</p>
  <hr class="my-4 ">
 <div class="blockquote bq-light mb-5 col-12">  <p class="p-0 m-0">{{project.short_description}}</p></div>
  <br><br>
  <h3 style="color: rgba(255, 255, 255, 0.664);">Funding Agency : {{project.sponsoring_agency}}</h3>
  <h4 style="color: rgba(255, 255, 255, 0.664);"><i class="fas fa-wallet"></i> Total Funds : <i
      class="fas fa-rupee-sign"></i> {{project.budget}}</h4>


  <br>
 <div class="text-right" >    <h3>Project Timeline</h3>
      <ul style="font-size: 120%;list-style-type: none;">
        <li>Started at - {{project.created_at|date}}</li>
        {%if project.status  %}
        <li>Completed at - {{project.completed_at|date}}</li>
        {%endif%}
      </ul></div>


</div>


<div class="container-fluid mt-5 col-10 text-left mx-auto ">
  <h1 class="text-muted mt-5 mb-0 p-0"> ->Description</h1>
</div>
<div class="container bhover col-xl-10 col-11 mt-5 mx-auto my-0 p-3 p-md-5 rounded_m   pt-0 bg-white table-responsive">
  {{project.description|safe}}
</div>




  <div class="  col-lg-10 col-11 mx-auto ">

      <h2 class="text-muted mt-5 "> People working on this project -> </h2>

    <div class="mt-4">
    <h2><b>Faculty</b></h2>
  </div>
  <div class="row  rounded p-4  bhover ">
    {%for employee in project.people.all%}
    {%if not employee.researcher%}


       <div class="card p-0 m-0 mx-md-0 mx-auto shadow-sm  faculty_card waves-effect " style="background-color: #ffffff;
        background-image: linear-gradient(315deg, #7ea1e2 0%, #e0e9fd 74%); width: 11rem; ">

        <a href="{%url 'memslab:show_profile' employee.user.username %}" data-toggle="tooltip" title="extra info">

            {% thumbnail employee.emp_pic "150x150" crop="top" as im %}
            <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}" class=" card-img-top" style="width:100%; height:auto;">
            {% endthumbnail %}


            <div class="card-body  pl-2  ">
            <p class="card-title">
              <h5 class="card-title text-left text-capitalize">{{employee.user.first_name}}
                {{employee.user.last_name}}</h5>
            </p>

            <p class="card-text text-left">
              {{employee.designation}}</p>
          </div>
        </a>

  </div>



    {%endif%}
    {%endfor%}
  </div>
</div>

  {%if   nostu%}
  <div class=" col-lg-10 col-11 mx-auto  "><div class="mt-5">
    <h2><b>Students</b></h2>
  </div>
  <div class="row  rounded p-4  bhover">

    {%for employee in project.people.all%}
    {%if employee.researcher%}

    <div class="card p-0 m-0 mx-md-0 mx-auto shadow-sm  faculty_card waves-effect " style="background-color: #ffffff;
   background-image: linear-gradient(315deg, #b1b1f7 0%, #cdcce7 74%); width: 11rem; ">

    <a href="{%url 'memslab:show_profile' employee.user.username %}" data-toggle="tooltip" title="extra info">

        {% thumbnail employee.emp_pic "130x130" crop="top" as im %}
        <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}" class=" card-img-top " style="width:100%; height:auto;">
        {% endthumbnail %}


        <div class="card-body pl-2 ">
        <p class="card-title">
          <h5 class="card-titletext-left text-capitalize">{{employee.user.first_name}}
            {{employee.user.last_name}}</h5>
        </p>
<p class="card-text text-left">
              {{employee.designation}}</p>

      </div>
    </a>

</div>

    {%endif%}
    {%endfor%}
  </div>
  </div>
{%endif%}

{%if project.proj_file%}
<div class=" container col-10-lg col-6-md col-4-sm mt-5  ">
  <div class="container  p-4 bhover rounded_m " style="font-size: 120%;">
 <b>Additional information about Project:
</b>
   <a class="btn btn-outline-primary waves-effect font-weight-bold" href="{{project.proj_file.url}}" target="_blank"
        role="button">{{project.filename}}</a>


  </div>
</div>
  {%endif%}

  {%for image in images%}
 <!-- Modal -->
 <div id="myModal{{ image.id }}" class="modal fade" role="dialog">
    <div class="modal-dialog modal-xl p-1">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header"><h1 class="modal-title p-3 ">{{image.title}}</h1>
          <button type="button" class="close" data-dismiss="modal">&times;</button>

        </div>
        <div class="modal-body text-center">
            {% thumbnail image.pic "500" crop="center" as im %}
          <a href="{{image.pic.url}}" target="_blank"><img src="{{im.url}}" class="rounded_m" style="object-fit: cover;  width: 70%; height: auto;"/></a>
          {% endthumbnail %}
        </div><p class=" col-11 mx-auto bq-info p-2" style="font-size: 110%;  word-wrap: break-word;">{{image.description}}</p>
        <div class="modal-footer">

        </div>
      </div>

    </div>
  </div>
  {%endfor%}
{%endblock%}